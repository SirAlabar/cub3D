=== BSP TEST SUITE ===

[TEST 1] Map Line Extraction: 
=== Map Details ===
Vertices (12):
v0: (167, 62)
v1: (295, 62)
v2: (295, 190)
v3: (167, 190)
v4: (1, 115)
v5: (129, 115)
v6: (129, 243)
v7: (1, 243)
v8: (48, 163)
v9: (176, 163)
v10: (176, 291)
v11: (48, 291)

Linedefs (16):
l0: v0 -> v1 (type: 0, front_sidedef: 0, back_sidedef: -1)
l1: v1 -> v2 (type: 0, front_sidedef: 0, back_sidedef: -1)
l2: v2 -> v3 (type: 0, front_sidedef: 0, back_sidedef: -1)
l3: v3 -> v0 (type: 0, front_sidedef: 0, back_sidedef: -1)
l4: v4 -> v5 (type: 0, front_sidedef: 0, back_sidedef: -1)
l5: v5 -> v6 (type: 0, front_sidedef: 0, back_sidedef: -1)
l6: v6 -> v7 (type: 0, front_sidedef: 0, back_sidedef: -1)
l7: v7 -> v4 (type: 0, front_sidedef: 0, back_sidedef: -1)
l8: v8 -> v9 (type: 0, front_sidedef: 0, back_sidedef: -1)
l9: v9 -> v10 (type: 0, front_sidedef: 0, back_sidedef: -1)
l10: v10 -> v11 (type: 0, front_sidedef: 0, back_sidedef: -1)
l11: v11 -> v8 (type: 0, front_sidedef: 0, back_sidedef: -1)
l12: v1 -> v10 (type: 0, front_sidedef: 0, back_sidedef: -1)
l13: v1 -> v10 (type: 0, front_sidedef: 0, back_sidedef: -1)
l14: v11 -> v6 (type: 0, front_sidedef: 0, back_sidedef: -1)
l15: v1 -> v6 (type: 0, front_sidedef: 0, back_sidedef: -1)

=== End of Map Details ===



=== Testing Map Line Extraction ===

=== Detailed Map Line Extraction ===
Total vertices: 12
Total linedefs: 16

Processing Linedef 0:
  Vertex1 index: 0
  Vertex2 index: 1
  Start: (167, 62)
  End: (295, 62)

Processing Linedef 1:
  Vertex1 index: 1
  Vertex2 index: 2
  Start: (295, 62)
  End: (295, 190)

Processing Linedef 2:
  Vertex1 index: 2
  Vertex2 index: 3
  Start: (295, 190)
  End: (167, 190)

Processing Linedef 3:
  Vertex1 index: 3
  Vertex2 index: 0
  Start: (167, 190)
  End: (167, 62)

Processing Linedef 4:
  Vertex1 index: 4
  Vertex2 index: 5
  Start: (1, 115)
  End: (129, 115)

Processing Linedef 5:
  Vertex1 index: 5
  Vertex2 index: 6
  Start: (129, 115)
  End: (129, 243)

Processing Linedef 6:
  Vertex1 index: 6
  Vertex2 index: 7
  Start: (129, 243)
  End: (1, 243)

Processing Linedef 7:
  Vertex1 index: 7
  Vertex2 index: 4
  Start: (1, 243)
  End: (1, 115)

Processing Linedef 8:
  Vertex1 index: 8
  Vertex2 index: 9
  Start: (48, 163)
  End: (176, 163)

Processing Linedef 9:
  Vertex1 index: 9
  Vertex2 index: 10
  Start: (176, 163)
  End: (176, 291)

Processing Linedef 10:
  Vertex1 index: 10
  Vertex2 index: 11
  Start: (176, 291)
  End: (48, 291)

Processing Linedef 11:
  Vertex1 index: 11
  Vertex2 index: 8
  Start: (48, 291)
  End: (48, 163)

Processing Linedef 12:
  Vertex1 index: 1
  Vertex2 index: 10
  Start: (295, 62)
  End: (176, 291)

Processing Linedef 13:
  Vertex1 index: 1
  Vertex2 index: 10
  Start: (295, 62)
  End: (176, 291)

Processing Linedef 14:
  Vertex1 index: 11
  Vertex2 index: 6
  Start: (48, 291)
  End: (129, 243)

Processing Linedef 15:
  Vertex1 index: 1
  Vertex2 index: 6
  Start: (295, 62)
  End: (129, 243)
Successfully extracted 16 lines
Line 0: (167,62) -> (295,62) [type: 0]
Line 1: (295,62) -> (295,190) [type: 0]
Line 2: (295,190) -> (167,190) [type: 0]
Line 3: (167,190) -> (167,62) [type: 0]
Line 4: (1,115) -> (129,115) [type: 0]
PASS

[TEST 2] Line Classification: 
=== Testing Line Classification ===

=== Detailed Map Line Extraction ===
Total vertices: 12
Total linedefs: 16

Processing Linedef 0:
  Vertex1 index: 0
  Vertex2 index: 1
  Start: (167, 62)
  End: (295, 62)

Processing Linedef 1:
  Vertex1 index: 1
  Vertex2 index: 2
  Start: (295, 62)
  End: (295, 190)

Processing Linedef 2:
  Vertex1 index: 2
  Vertex2 index: 3
  Start: (295, 190)
  End: (167, 190)

Processing Linedef 3:
  Vertex1 index: 3
  Vertex2 index: 0
  Start: (167, 190)
  End: (167, 62)

Processing Linedef 4:
  Vertex1 index: 4
  Vertex2 index: 5
  Start: (1, 115)
  End: (129, 115)

Processing Linedef 5:
  Vertex1 index: 5
  Vertex2 index: 6
  Start: (129, 115)
  End: (129, 243)

Processing Linedef 6:
  Vertex1 index: 6
  Vertex2 index: 7
  Start: (129, 243)
  End: (1, 243)

Processing Linedef 7:
  Vertex1 index: 7
  Vertex2 index: 4
  Start: (1, 243)
  End: (1, 115)

Processing Linedef 8:
  Vertex1 index: 8
  Vertex2 index: 9
  Start: (48, 163)
  End: (176, 163)

Processing Linedef 9:
  Vertex1 index: 9
  Vertex2 index: 10
  Start: (176, 163)
  End: (176, 291)

Processing Linedef 10:
  Vertex1 index: 10
  Vertex2 index: 11
  Start: (176, 291)
  End: (48, 291)

Processing Linedef 11:
  Vertex1 index: 11
  Vertex2 index: 8
  Start: (48, 291)
  End: (48, 163)

Processing Linedef 12:
  Vertex1 index: 1
  Vertex2 index: 10
  Start: (295, 62)
  End: (176, 291)

Processing Linedef 13:
  Vertex1 index: 1
  Vertex2 index: 10
  Start: (295, 62)
  End: (176, 291)

Processing Linedef 14:
  Vertex1 index: 11
  Vertex2 index: 6
  Start: (48, 291)
  End: (129, 243)

Processing Linedef 15:
  Vertex1 index: 1
  Vertex2 index: 6
  Start: (295, 62)
  End: (129, 243)
Partition Line: (167,62) -> (295,62)
Line 1: (295,62) -> (295,190) - Side: 1
Line 2: (295,190) -> (167,190) - Side: 1
Line 3: (167,190) -> (167,62) - Side: 1
Line 4: (1,115) -> (129,115) - Side: 1
Line 5: (129,115) -> (129,243) - Side: 1
Line 6: (129,243) -> (1,243) - Side: 1
Line 7: (1,243) -> (1,115) - Side: 1
Line 8: (48,163) -> (176,163) - Side: 1
Line 9: (176,163) -> (176,291) - Side: 1
Line 10: (176,291) -> (48,291) - Side: 1
Line 11: (48,291) -> (48,163) - Side: 1
Line 12: (295,62) -> (176,291) - Side: 1
Line 13: (295,62) -> (176,291) - Side: 1
Line 14: (48,291) -> (129,243) - Side: 1
Line 15: (295,62) -> (129,243) - Side: 1
PASS

[TEST 3] Partition Selection: 
=== Testing Partition Selection ===

=== Detailed Map Line Extraction ===
Total vertices: 12
Total linedefs: 16

Processing Linedef 0:
  Vertex1 index: 0
  Vertex2 index: 1
  Start: (167, 62)
  End: (295, 62)

Processing Linedef 1:
  Vertex1 index: 1
  Vertex2 index: 2
  Start: (295, 62)
  End: (295, 190)

Processing Linedef 2:
  Vertex1 index: 2
  Vertex2 index: 3
  Start: (295, 190)
  End: (167, 190)

Processing Linedef 3:
  Vertex1 index: 3
  Vertex2 index: 0
  Start: (167, 190)
  End: (167, 62)

Processing Linedef 4:
  Vertex1 index: 4
  Vertex2 index: 5
  Start: (1, 115)
  End: (129, 115)

Processing Linedef 5:
  Vertex1 index: 5
  Vertex2 index: 6
  Start: (129, 115)
  End: (129, 243)

Processing Linedef 6:
  Vertex1 index: 6
  Vertex2 index: 7
  Start: (129, 243)
  End: (1, 243)

Processing Linedef 7:
  Vertex1 index: 7
  Vertex2 index: 4
  Start: (1, 243)
  End: (1, 115)

Processing Linedef 8:
  Vertex1 index: 8
  Vertex2 index: 9
  Start: (48, 163)
  End: (176, 163)

Processing Linedef 9:
  Vertex1 index: 9
  Vertex2 index: 10
  Start: (176, 163)
  End: (176, 291)

Processing Linedef 10:
  Vertex1 index: 10
  Vertex2 index: 11
  Start: (176, 291)
  End: (48, 291)

Processing Linedef 11:
  Vertex1 index: 11
  Vertex2 index: 8
  Start: (48, 291)
  End: (48, 163)

Processing Linedef 12:
  Vertex1 index: 1
  Vertex2 index: 10
  Start: (295, 62)
  End: (176, 291)

Processing Linedef 13:
  Vertex1 index: 1
  Vertex2 index: 10
  Start: (295, 62)
  End: (176, 291)

Processing Linedef 14:
  Vertex1 index: 11
  Vertex2 index: 6
  Start: (48, 291)
  End: (129, 243)

Processing Linedef 15:
  Vertex1 index: 1
  Vertex2 index: 6
  Start: (295, 62)
  End: (129, 243)
Best Partition Selected: (129,115) -> (129,243)
PASS

[TEST 4] Point Classification: 
=== Testing Point Classification ===
Test Line: (0,0) -> (100,0)

Testing clear front/back points:
Point Front (50,10): 1
Point Back (50,-10): -1

Testing point on the line:
Point Near (50,0): 2

Testing point beyond endpoint:
Point Beyond (150,0): 2

Testing with diagonal line:
Diagonal Line: (0,0) -> (100,100)
Test Point (50,40): -1

=== End of Point Classification Tests ===
PASS

[TEST 5] Line Splitting: 
=== Testing Line Splitting ===

Test 1 - Basic Perpendicular Split:
Partition: (0,100) -> (200,100)
Line: (100,0) -> (100,200)
Split successful!
Front part: (100,100) -> (100,200)
Back part: (100,0) -> (100,100)

Test 2 - 45-Degree Diagonal Split:
Partition: (0,0) -> (100,100)
Line: (0,100) -> (100,0)
Split successful!
Front part: (0,100) -> (50,50)
Back part: (50,50) -> (100,0)

Test 3 - Parallel Lines:
Testing parallel line with horizontal partition:
Line: (0,150) -> (200,150)
No split (correct for parallel lines)

Test 4 - Steep Angle Split:
Partition: (0,0) -> (10,100)
Line: (0,100) -> (10,0)
Split successful!
Front part: (0,100) -> (5,50)
Back part: (5,50) -> (10,0)

Test 5 - Edge Case Split:
Partition: (100,0) -> (100,100)
Line: (99,50) -> (101,50)
Split successful!
Front part: (99,50) -> (100,50)
Back part: (100,50) -> (101,50)

=== End of Line Splitting Tests ===
PASS

[TEST 6] BSP Tree Construction: 
=== Comprehensive BSP Tree Construction Test ===

=== Detailed Map Line Extraction ===
Total vertices: 12
Total linedefs: 16

Processing Linedef 0:
  Vertex1 index: 0
  Vertex2 index: 1
  Start: (167, 62)
  End: (295, 62)

Processing Linedef 1:
  Vertex1 index: 1
  Vertex2 index: 2
  Start: (295, 62)
  End: (295, 190)

Processing Linedef 2:
  Vertex1 index: 2
  Vertex2 index: 3
  Start: (295, 190)
  End: (167, 190)

Processing Linedef 3:
  Vertex1 index: 3
  Vertex2 index: 0
  Start: (167, 190)
  End: (167, 62)

Processing Linedef 4:
  Vertex1 index: 4
  Vertex2 index: 5
  Start: (1, 115)
  End: (129, 115)

Processing Linedef 5:
  Vertex1 index: 5
  Vertex2 index: 6
  Start: (129, 115)
  End: (129, 243)

Processing Linedef 6:
  Vertex1 index: 6
  Vertex2 index: 7
  Start: (129, 243)
  End: (1, 243)

Processing Linedef 7:
  Vertex1 index: 7
  Vertex2 index: 4
  Start: (1, 243)
  End: (1, 115)

Processing Linedef 8:
  Vertex1 index: 8
  Vertex2 index: 9
  Start: (48, 163)
  End: (176, 163)

Processing Linedef 9:
  Vertex1 index: 9
  Vertex2 index: 10
  Start: (176, 163)
  End: (176, 291)

Processing Linedef 10:
  Vertex1 index: 10
  Vertex2 index: 11
  Start: (176, 291)
  End: (48, 291)

Processing Linedef 11:
  Vertex1 index: 11
  Vertex2 index: 8
  Start: (48, 291)
  End: (48, 163)

Processing Linedef 12:
  Vertex1 index: 1
  Vertex2 index: 10
  Start: (295, 62)
  End: (176, 291)

Processing Linedef 13:
  Vertex1 index: 1
  Vertex2 index: 10
  Start: (295, 62)
  End: (176, 291)

Processing Linedef 14:
  Vertex1 index: 11
  Vertex2 index: 6
  Start: (48, 291)
  End: (129, 243)

Processing Linedef 15:
  Vertex1 index: 1
  Vertex2 index: 6
  Start: (295, 62)
  End: (129, 243)
Map Details:
Total vertices: 12
Total linedefs: 16
Lines extracted: 16

=== Detailed Map Line Extraction ===
Total vertices: 12
Total linedefs: 16

Processing Linedef 0:
  Vertex1 index: 0
  Vertex2 index: 1
  Start: (167, 62)
  End: (295, 62)

Processing Linedef 1:
  Vertex1 index: 1
  Vertex2 index: 2
  Start: (295, 62)
  End: (295, 190)

Processing Linedef 2:
  Vertex1 index: 2
  Vertex2 index: 3
  Start: (295, 190)
  End: (167, 190)

Processing Linedef 3:
  Vertex1 index: 3
  Vertex2 index: 0
  Start: (167, 190)
  End: (167, 62)

Processing Linedef 4:
  Vertex1 index: 4
  Vertex2 index: 5
  Start: (1, 115)
  End: (129, 115)

Processing Linedef 5:
  Vertex1 index: 5
  Vertex2 index: 6
  Start: (129, 115)
  End: (129, 243)

Processing Linedef 6:
  Vertex1 index: 6
  Vertex2 index: 7
  Start: (129, 243)
  End: (1, 243)

Processing Linedef 7:
  Vertex1 index: 7
  Vertex2 index: 4
  Start: (1, 243)
  End: (1, 115)

Processing Linedef 8:
  Vertex1 index: 8
  Vertex2 index: 9
  Start: (48, 163)
  End: (176, 163)

Processing Linedef 9:
  Vertex1 index: 9
  Vertex2 index: 10
  Start: (176, 163)
  End: (176, 291)

Processing Linedef 10:
  Vertex1 index: 10
  Vertex2 index: 11
  Start: (176, 291)
  End: (48, 291)

Processing Linedef 11:
  Vertex1 index: 11
  Vertex2 index: 8
  Start: (48, 291)
  End: (48, 163)

Processing Linedef 12:
  Vertex1 index: 1
  Vertex2 index: 10
  Start: (295, 62)
  End: (176, 291)

Processing Linedef 13:
  Vertex1 index: 1
  Vertex2 index: 10
  Start: (295, 62)
  End: (176, 291)

Processing Linedef 14:
  Vertex1 index: 11
  Vertex2 index: 6
  Start: (48, 291)
  End: (129, 243)

Processing Linedef 15:
  Vertex1 index: 1
  Vertex2 index: 6
  Start: (295, 62)
  End: (129, 243)

BSP Tree Analysis:
Total nodes: 22
Maximum tree depth: 5
BSP Tree Stats:
- Max Depth: 5
- Total Errors: 0
SUCCESS: BSP tree passed validation

BSP Tree Structure:

=== BSP Tree ===


Partition: Line: (129,115) -> (129,243) [type: 0]
Lines (0):
├── Front:
│
  Partition: Line: (129,243) -> (1,243) [type: 0]
  Lines (0):
│├── Front:
││
    Partition: Line: (1,115) -> (129,115) [type: 0]
    Lines (0):
││├── Front:
│││
      Partition: Line: (48,243) -> (48,163) [type: 0]
      Lines (0):
│││├── Front:
││││
        Partition: Line: (48,163) -> (129,163) [type: 0]
        Lines (0):
│││└── Back:
│││   
        Partition: Line: (1,243) -> (1,115) [type: 0]
        Lines (0):
│└── Back:
│   
    Partition: Line: (48,291) -> (129,243) [type: 0]
    Lines (0):
│   ├── Front:
│   │
      Partition: Line: (176,291) -> (48,291) [type: 0]
      Lines (0):
│   └── Back:
│      
      Partition: Line: (48,291) -> (48,243) [type: 0]
      Lines (0):
└── Back:
   
  Partition: Line: (295,62) -> (129,243) [type: 0]
  Lines (0):
   ├── Front:
   │
    Partition: Line: (129,163) -> (176,163) [type: 0]
    Lines (0):
   │├── Front:
   ││
      Partition: Line: (167,190) -> (167,163) [type: 0]
      Lines (0):
   ││├── Front:
   │││
        Partition: Line: (177,190) -> (167,190) [type: 0]
        Lines (0):
   │││├── Front:
   ││││
          Partition: Line: (176,163) -> (176,190) [type: 0]
          Lines (0):
   │││└── Back:
   │││   
          Partition: Line: (176,190) -> (176,291) [type: 0]
          Lines (0):
   │└── Back:
   │   
      Partition: Line: (167,163) -> (167,62) [type: 0]
      Lines (0):
   │   ├── Front:
   │   │
        Partition: Line: (167,62) -> (295,62) [type: 0]
        Lines (0):
   └── Back:
      
    Partition: Line: (295,62) -> (295,190) [type: 0]
    Lines (0):
      ├── Front:
      │
      Partition: Line: (295,62) -> (176,291) [type: 0]
      Lines (0):
      │├── Front:
      ││
        Partition: Line: (295,62) -> (176,291) [type: 0]
        Lines (0):
      ││├── Front:
      │││
          Partition: Line: (228,190) -> (177,190) [type: 0]
          Lines (0):
      │└── Back:
      │   
        Partition: Line: (295,190) -> (228,190) [type: 0]
        Lines (0):

=== End of Tree ===

Traversal Tests:
Finding node for point (128, 128)
Node partition: (129,115) -> (129,243)
Node partition: (129,243) -> (1,243)
Node partition: (1,115) -> (129,115)
Node partition: (48,243) -> (48,163)
Node partition: (48,163) -> (129,163)
No node found for test point
=== End of BSP Tree Construction Test ===
PASS

=== TEST SUMMARY ===
Passed: 6/6
Success Rate: %
